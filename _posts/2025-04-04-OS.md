---
title: '操作系统'
date: 2025-04-04
permalink: /posts/2025/04/blog-post-os/
tags:
  - 操作系统
  - 面试必备
  - 技术笔记
---

# 操作系统学习笔记

## 操作系统概述
- **定义**：运行在计算机上的软件程序，用于管理计算机硬件和软件资源。  
- **工作应用**：缓存思想不仅用于数据库/Redis/内存层次，也存在于 **存储层次结构设计**（CPU 缓存、内存、磁盘）。  
- **核心主题**：并发、虚拟化、持久化。  
- **学习方法**：做系统、在真实环境中解决问题。  

👉 推荐阅读：[什么是操作系统](https://mp.weixin.qq.com/s/sfAsq2wXpRfXwc6XJIr5Ww)

---

## 进程管理

### 用户态与内核态
- **用户态**：权限低，运行应用程序逻辑，不能直接访问硬件。  
- **内核态**：权限高，可访问所有资源，执行系统调用与调度。  

#### 切换方式
1. **系统调用（Trap）**：用户进程主动请求服务。  
2. **中断（Interrupt）**：外设完成请求后通知 CPU。  
3. **异常（Exception）**：运行时出错，如缺页异常。  

👉 **目的**：安全性、稳定性、受控访问、多任务能力。  

---

### 地址空间管理
- 用户态：独立虚拟地址空间，不可直接访问内核。  
- 内核态：可访问所有内存，常见划分如 Linux 的 **用户空间 / 内核空间**。  

---

### 进程 / 线程 / 协程
- **进程**：独立运行实例，资源隔离，开销大。  
- **线程**：轻量化，属于进程内部，资源共享，通信高效。  
- **协程**：用户态调度，开销更低，适合高并发。  

#### 区别点
1. **资源隔离性**  
2. **创建与切换开销**  
3. **通信机制**  
4. **容错能力**  

---

### 进程状态
- 创建 → 就绪 → 运行 → 阻塞 → 结束  

---

### 调度算法
- **进程调度**：FCFS、SJF、RR、优先级、MFQ（Linux/Unix 常用）。  
- **线程调度**：
  - 时间片轮转  
  - 抢占式调度（基于优先级）  

---

### 进程间通信（IPC）
- **管道 / 匿名管道**：父子进程通信。  
- **有名管道**：跨进程通信。  
- **信号**：异步通知。  
- **消息队列**：存放在内核，支持随机读取。  
- **信号量**：进程同步。  
- **共享内存**：效率最高，需要同步机制。  
- **套接字**：跨主机通信。  

---

### 线程同步方式
- 互斥锁（Mutex）  
- 读写锁（Read-Write Lock）  
- 信号量（Semaphore）  
- 屏障（Barrier）  
- 事件（Event/Wait-Notify）  
- 自旋锁  

---

### 线程与进程效率比较
- **线程优势**：
  1. 资源共享，通信更快。  
  2. 创建开销小。  
  3. 上下文切换轻量。  
  4. 并发效率高，充分利用多核。  

---

### 特殊进程
- **僵尸进程**：子进程退出但父进程未回收。  
- **孤儿进程**：父进程退出，子进程由 `init` 进程接管。  

---

### 死锁
- **四个条件**：互斥、占有并等待、不可抢占、循环等待。  
- **解决方法**：预防、避免（银行家算法）、检测、解除。  

---

## 内存管理

### 核心任务
- 内存分配与回收  
- 地址转换（虚拟地址 → 物理地址）  
- 虚拟内存  
- 内存映射与优化  
- 内存安全隔离  

---

### 管理方式
- **连续内存管理**：简单但浪费。  
- **非连续管理**：灵活。  
- **段式管理**：按逻辑分段。  
- **页式管理**：按页分配，主流。  
- **段页式管理**：结合二者优点。  

---

### 虚拟内存
- **作用**：进程隔离、内存利用率、简化管理、共享内存、安全性、扩展内存空间。  
- **实现**：MMU 地址转换（分段 / 分页）。  
- **分页机制优化**：
  - 多级页表  
  - TLB（快表缓存）  

---

### 局部性原理
- **时间局部性**：重复访问。  
- **空间局部性**：相邻访问。  
- **应用**：缓存、预取机制。  

---

## 文件管理

### 功能
- 文件与目录管理  
- 存储分配  
- 访问控制与权限  

### 磁盘调度算法
- FCFS  
- SSTF  
- SCAN / CSCAN  
- LOOK / CLOOK  
- （用于减少寻道与延迟时间）  

---

## I/O 管理
- **I/O 模型**：阻塞、非阻塞、异步、IO 多路复用。  

---

## Linux 专题

### 学习路径
- 熟悉命令行工具：vim、tmux、grep、gcc …  
- 能管理千行规模代码。  
- 调试思维：机器永远是对的。  

### 系统日志
- 查看：`cat`、`tail`、`less`  
- 常见日志：
  - `/var/log/syslog`  
  - `/var/log/auth.log`  
  - `/var/log/kern.log`  
  - `/var/log/dmesg`  

### 常用命令
- 内存：`free -h`、`top`、`htop`  
- 进程：`ps aux`、`pgrep`、`top`  
- 文件权限：`rwx`  
- 链接：
  - **软链接**：类似快捷方式，跨文件系统，源文件删掉则失效。  
  - **硬链接**：共享 inode，不可跨文件系统，源文件删掉仍可用。  

---

# 总结
操作系统是 **计算机科学的基石**，无论是 **面试准备** 还是 **工程实践**，掌握进程、线程、内存、文件、I/O 与 Linux 基础，都是进阶大厂必经之路。  
